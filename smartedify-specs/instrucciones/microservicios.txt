La arquitectura de microservicios actualizada y consolidada para la plataforma SmartEdify, La nueva estructura consta de 12 servicios especializados.
* **Puerto 8080** - **API_GATEWAY** - Actúa como la capa de entrada unificada y el orquestador principal de tráfico para todas las aplicaciones cliente y microservicios. Sus funciones clave incluyen el **enrutamiento de solicitudes**, la **validación de tokens JWT**, la limitación de tasas (rate limiting), el manejo de CORS y la autenticación centralizada, proporcionando una interfaz coherente y segura que abstrae la complejidad de los servicios subyacentes.
* **Puerto 3001** - **AUTH_SERVICE** - Es el proveedor de identidad centralizado y la base de la seguridad de la plataforma. Gestiona la **autenticación** (JWT, OAuth 2.0/OIDC), **autorización** (RBAC), autenticación multi-factor (MFA), y el ciclo de vida de sesiones y tokens. Su alcance es crítico, garantizando seguridad de extremo a extremo, cumplimiento con normativas de protección de datos (GDPR/ARCO), y sirve como **plantilla arquitectónica** para otros microservicios.
* **Puerto 3002** - **USERS_SERVICE** - Funciona como el sistema central para la gestión de identidades y perfiles de usuario. En colaboración con el Auth Service, maneja los **perfiles de usuario** con roles específicos por condominio, la **estructura organizacional del condominio**, las relaciones entre propietarios e inquilinos, y provee los **datos maestros de usuarios** para todo el sistema, incluyendo la gestión de jerarquías organizacionales y de personal.
* **Puerto 3003** - **TENANTS_SERVICE** - Es el sistema fundamental para la gestión multi-tenant, administrando la estructura de los condominios y sus unidades. Sus funciones abarcan la **creación y configuración de condominios**, la gestión de unidades con sus **porcentajes de participación (alícuotas)**, flujos de onboarding automatizados y el **aislamiento completo de datos** para cada tenant, además de gestionar la configuración dinámica por condominio.
* **Puerto 3004** - **SECURITY_SERVICE** - Proporciona capacidades de seguridad adicionales que complementan al Auth Service. Su función es manejar aspectos como el **análisis avanzado de amenazas**, el monitoreo del comportamiento del usuario, el **fingerprinting de dispositivos** y la validación de geolocalización para fortalecer la postura de seguridad general de la plataforma.
* **Puerto 3005** - **COMMUNICATIONS_SERVICE** - Actúa como el hub centralizado de mensajería y notificaciones. Ofrece comunicación multicanal (**correo electrónico, SMS, WhatsApp, push**), gestión de plantillas, seguimiento de entregas y un mural de noticias virtual. Consolida todas las alertas, incluyendo las de **consumo de servicios públicos**, y es responsable del **registro y validación de esquemas de eventos (Event Schema Registry)** para asegurar la compatibilidad en la comunicación asíncrona entre servicios.
* **Puerto 3007** - **FINANCE_SERVICE** - Es el sistema integral de gestión financiera, consolidando todas las operaciones de contabilidad, tesorería y pagos. Sus funciones abarcan la gestión de cuotas de mantenimiento (calculadas por **alícuota**), procesamiento de pagos a través de la **integración nativa con pasarelas peruanas** (Culqi, Mercado Pago, Yape, Plin), la **conciliación bancaria automática**, y la generación de informes financieros bajo el estándar **PCGE**. Además, asegura el cumplimiento tributario con **SUNAT**, coordina transacciones distribuidas (patrón **Saga**) y valida los derechos de voto para las asambleas.
* **Puerto 3008** - **PAYROLL_SERVICE** - Se especializa en la gestión de nóminas y obligaciones laborales. Se integra con el Finance Service para la generación del **PLAME (Planilla Mensual de Pagos)** y el seguimiento de los costos de empleados, asegurando el cumplimiento de las obligaciones laborales y fiscales del condominio.
* **Puerto 3010** - **MAINTENANCE_SERVICE** - Gestiona el **inventario digital de activos** del condominio y el ciclo de vida completo de incidencias y órdenes de servicio. Permite el **mantenimiento preventivo programado**, la gestión de proveedores, y el seguimiento de costos y progreso de las órdenes de trabajo para mantener la operatividad del condominio. Consolida la **organización de documentos de activos y la generación de hojas de activos detalladas**.
* **Puerto 3011** - **ASSEMBLY_CORE** - Es el orquestador central para la gestión de asambleas. Implementa el ciclo completo desde la convocatoria hasta el acta final, incluyendo **votación ponderada por alícuota**, gestión de **quórum en tiempo real**, y generación automática de actas certificadas con cumplimiento legal. Utiliza **IA para moderación** y NLP para la redacción de actas.